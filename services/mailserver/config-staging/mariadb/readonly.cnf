# ====================================
# Staging環境用 MariaDB 設定
# ====================================
#
# 【重要】Read-Onlyモード設定（第2層防御）
# - super-read-only: ON（すべてのユーザーが読み取り専用）
# - read-only: ON（追加の保護）
#
# この設定により、staging環境でのデータ変更を防止します。
# 本番DBからのデータコピーは、一時的にread-onlyを無効化して実行します。

[mysqld]
# Read-Only設定（第2層防御）
read_only = 1
# Note: super_read_only removed - not supported in MariaDB 10.11.7

# パフォーマンス最適化（staging環境用軽量設定）
innodb_buffer_pool_size = 256M
max_connections = 50
query_cache_size = 32M
query_cache_type = 1

# ログ設定
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow-query.log
long_query_time = 2

# キャラクターセット
character_set_server = utf8mb4
collation_server = utf8mb4_unicode_ci

# タイムゾーン
default_time_zone = '+09:00'

# セキュリティ設定
local_infile = 0
