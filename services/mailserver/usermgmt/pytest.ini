[pytest]
# Pytest configuration for usermgmt application

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test directories
testpaths = tests

# Pytest options
addopts =
    # Verbose output with detailed test names
    -v

    # Show local variables in tracebacks
    -l

    # Show summary of all test outcomes
    -ra

    # Strict markers (require markers to be registered)
    --strict-markers

    # Coverage reporting
    --cov=app
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-branch

    # Warnings
    -W ignore::DeprecationWarning
    -W ignore::PendingDeprecationWarning

    # Fail on first error (optional, can be removed for full test suite)
    # -x

# Markers for categorizing tests
markers =
    unit: Unit tests (fast, isolated tests)
    integration: Integration tests (slower, require external services)
    slow: Slow-running tests
    security: Security-focused tests
    models: Database model tests
    routes: HTTP route tests
    services: Service layer tests
    imap: IMAP integration tests

# Minimum coverage percentage to pass
# --cov-fail-under=80

# Test output settings
console_output_style = progress
log_cli = false
log_cli_level = INFO

# Database setup for tests
env =
    DB_NAME=mailserver_usermgmt_test
