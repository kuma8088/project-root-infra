# ãƒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦**: Xserverã‹ã‚‰ãƒ–ãƒ­ã‚°ã‚’Dell WorkStation + Cloudflare Tunnelã¸ç§»æ¤

**æ§‹ç¯‰ç’°å¢ƒ**: Dell WorkStation (Rocky Linux 9.6) + Docker Compose

**ä½œæˆæ—¥**: 2025-11-08

---

## ğŸ“‹ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆ

### è¦ä»¶ãƒ»è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|------------|------|-----------|
| [01_requirements.md](./01_requirements.md) | è¦ä»¶å®šç¾©æ›¸ | âœ… å®Œäº† |
| [02_design.md](./02_design.md) | ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸ | âœ… å®Œäº† |
| [03_installation.md](./03_installation.md) | æ§‹ç¯‰æ‰‹é †æ›¸ | âœ… å®Œäº† |
| [04_migration.md](./04_migration.md) | Xserverç§»è¡Œæ‰‹é †æ›¸ | âœ… å®Œäº† |
| 05_testing.md | ãƒ†ã‚¹ãƒˆè¨ˆç”»æ›¸ | ğŸ“ æœªä½œæˆ |

---

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„

**ä¸»ç›®çš„**: Xserverãƒ–ãƒ­ã‚°ã‚’è‡ªç¤¾ã‚¤ãƒ³ãƒ•ãƒ©ã¸ç§»æ¤ã—ã€ã‚³ã‚¹ãƒˆå‰Šæ¸›ã¨ãƒ‡ãƒ¼ã‚¿ä¸»æ¨©ç¢ºä¿

**æŠ€è¡“ç›®æ¨™**:
- âœ… Dell WorkStationå†…Docker Composeç’°å¢ƒæ§‹ç¯‰
- âœ… Cloudflare Tunnelå°å…¥ï¼ˆå‹•çš„IPå¯¾å¿œï¼‰
- âœ… æ—¢å­˜Mailserverã‚¤ãƒ³ãƒ•ãƒ©ã¨ã®å…±å­˜
- âœ… Phase 11-Bãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ã¸ã®çµ±åˆ

### ã‚¹ã‚³ãƒ¼ãƒ—

**å¯¾è±¡ç¯„å›²**:
- WordPressç’°å¢ƒæ§‹ç¯‰ï¼ˆDocker Composeï¼‰
- Cloudflare Tunnelè¨­å®š
- Xserverã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚¹ãƒˆã‚¢æ©Ÿèƒ½

**å¯¾è±¡å¤–**:
- ãƒ‡ã‚¶ã‚¤ãƒ³å¤‰æ›´
- æ–°æ©Ÿèƒ½è¿½åŠ ï¼ˆç§»è¡Œå®Œäº†å¾Œã«æ¤œè¨ï¼‰
- AWSç§»è¡Œï¼ˆPhase 12ä»¥é™ï¼‰

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆ

```
blog_network (Docker Bridge)
â”œâ”€â”€ wordpress (PHP-FPM 8.2)
â”œâ”€â”€ nginx (ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·)
â”œâ”€â”€ mariadb (10.11)
â””â”€â”€ cloudflared (Cloudflare Tunnel)
```

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼] â†’ [Cloudflare Edge] â†’ [Tunnel] â†’ [Dell nginx:8080] â†’ [WordPress]
              â†“                     â†“
           DDoSä¿è­·            outboundæ¥ç¶šã®ã¿
           CDN                 (ãƒãƒ¼ãƒˆé–‹æ”¾ä¸è¦)
```

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é…ç½®

| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | é…ç½®å…ˆ | ãƒ‡ãƒã‚¤ã‚¹ | ç†ç”± |
|-----------|--------|---------|------|
| **MariaDB** | `/var/lib/docker/volumes/` | SSD | é«˜é€ŸDBæ€§èƒ½ |
| **Logs** | `/var/lib/docker/volumes/` | SSD | é«˜é€Ÿãƒ­ã‚°æ›¸è¾¼ |
| **WordPress files** | `/mnt/backup-hdd/` | HDD | å¤§å®¹é‡ãƒ¡ãƒ‡ã‚£ã‚¢ |
| **Backups** | `/mnt/backup-hdd/` | HDD | é•·æœŸä¿å­˜ |

---

## ğŸ“Š æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å‚™è€ƒ |
|---------|------|-----------|------|
| **OS** | Rocky Linux | 9.6 | æ—¢å­˜ç’°å¢ƒ |
| **ã‚³ãƒ³ãƒ†ãƒŠ** | Docker + Compose | 24.0.x + 2.x | æ—¢å­˜ç’°å¢ƒ |
| **Webã‚µãƒ¼ãƒãƒ¼** | Nginx | 1.24+ | ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· |
| **ã‚¢ãƒ—ãƒª** | WordPress | 6.4+ | æœ€æ–°å®‰å®šç‰ˆ |
| **PHP** | PHP-FPM | 8.2+ | WordPressæ¨å¥¨ |
| **DB** | MariaDB | 10.11+ | Mailserverã¨åŒãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
| **ãƒˆãƒ³ãƒãƒ«** | cloudflared | latest | Cloudflareå…¬å¼ |
| **SSL/TLS** | Cloudflareè¨¼æ˜æ›¸ | - | è‡ªå‹•ç®¡ç† |

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆæ§‹ç¯‰å®Œäº†å¾Œï¼‰

### å‰ææ¡ä»¶

- âœ… Rocky Linux 9.6
- âœ… Docker 24.0.x+
- âœ… Docker Compose 2.x+
- âœ… Cloudflareã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³å¯ï¼‰
- âœ… ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆDNSç®¡ç†ã‚’Cloudflareã¸ç§»ç®¡ï¼‰

### æ§‹ç¯‰æ‰‹é †ï¼ˆäºˆå®šï¼‰

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªç§»å‹•
cd /opt/onprem-infra-system/project-root-infra/services/blog

# 2. ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
vi .env  # DBæ¥ç¶šæƒ…å ±ãƒ»Cloudflareèªè¨¼æƒ…å ±è¨­å®š

# 3. Docker Composeèµ·å‹•
docker compose up -d

# 4. WordPressåˆæœŸè¨­å®š
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ https://your-domain.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹

# 5. Xserverã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
./scripts/migrate-from-xserver.sh
```

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆäºˆå®šï¼‰

```
/opt/onprem-infra-system/project-root-infra/services/blog/
â”œâ”€â”€ docker-compose.yml        # Docker Composeå®šç¾©
â”œâ”€â”€ .env                       # ç’°å¢ƒå¤‰æ•°ï¼ˆGitç®¡ç†å¤–ï¼‰
â”œâ”€â”€ .env.example              # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ nginx/
â”‚   â”‚   â”œâ”€â”€ nginx.conf        # Nginxè¨­å®š
â”‚   â”‚   â””â”€â”€ wordpress.conf    # WordPressç”¨è¨­å®š
â”‚   â”œâ”€â”€ php/
â”‚   â”‚   â””â”€â”€ php.ini           # PHPè¨­å®š
â”‚   â””â”€â”€ cloudflared/
â”‚       â””â”€â”€ config.yml        # Cloudflare Tunnelè¨­å®š
â”œâ”€â”€ data/                      # Docker Volume ãƒã‚¦ãƒ³ãƒˆå…ˆ
â”‚   â”œâ”€â”€ wordpress/            # WordPress files (HDD)
â”‚   â”œâ”€â”€ mysql/                # MariaDB data (SSD)
â”‚   â””â”€â”€ logs/                 # ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ« (SSD)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ backup.sh             # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ restore.sh            # ãƒªã‚¹ãƒˆã‚¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ migrate-from-xserver.sh  # Xserverç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ backups/                  # ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— (HDD)
```

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

- âœ… **é€šä¿¡æš—å·åŒ–**: Cloudflareè¨¼æ˜æ›¸ï¼ˆHTTPSå¿…é ˆï¼‰
- âœ… **WordPressç®¡ç†ç”»é¢**: IPåˆ¶é™ã¾ãŸã¯ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Dockerå†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³**: æœ€å°æ¨©é™è¨­å®š
- âœ… **å®šæœŸæ›´æ–°**: WordPress/ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æœˆæ¬¡æ›´æ–°
- âœ… **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: æ—¥æ¬¡è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

---

## ğŸ’¾ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»•æ§˜ï¼ˆäºˆå®šï¼‰

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ç¨®åˆ¥ | å®Ÿè¡Œæ™‚åˆ» | ä¿å­˜æœŸé–“ | ä¿å­˜å…ˆ |
|------|---------|---------|--------|
| **æ—¥æ¬¡** | AM 3:30 | 7ä¸–ä»£ | `/mnt/backup-hdd/blog/daily/` |
| **é€±æ¬¡** | æ—¥æ›œ AM 2:30 | 4ä¸–ä»£ | `/mnt/backup-hdd/blog/weekly/` |
| **S3åŒæœŸ** | AM 4:30 | 30æ—¥é–“ | S3ãƒã‚±ãƒƒãƒˆï¼ˆPhase 11-Bçµ±åˆæ™‚ï¼‰ |

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¯¾è±¡

- WordPress DBï¼ˆMariaDB dumpï¼‰
- WordPress filesï¼ˆ`/var/www/html/`ï¼‰
- Nginxè¨­å®š
- Docker Composeè¨­å®š

### ãƒªã‚¹ãƒˆã‚¢ç›®æ¨™

- **å®Œå…¨å¾©æ—§**: RTO 2æ™‚é–“ã€RPO 24æ™‚é–“
- **éƒ¨åˆ†å¾©æ—§**: RTO 30åˆ†ã€RPO 24æ™‚é–“

---

## ğŸ“ˆ æ€§èƒ½è¦ä»¶

| é …ç›® | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|---------|
| **ãƒšãƒ¼ã‚¸è¡¨ç¤ºé€Ÿåº¦** | < 3ç§’ | PageSpeed Insights |
| **åŒæ™‚æ¥ç¶šæ•°** | 10-50ãƒ¦ãƒ¼ã‚¶ãƒ¼ | åˆæœŸæƒ³å®š |
| **ç¨¼åƒç‡** | > 99% (æœˆé–“) | Uptimeç›£è¦– |
| **DBå¿œç­”æ™‚é–“** | < 100ms | WordPress Debug Log |

---

## ğŸ› ï¸ é‹ç”¨ã‚¿ã‚¹ã‚¯ï¼ˆäºˆå®šï¼‰

### æ—¥æ¬¡
- [ ] ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒç¢ºèªï¼ˆ5åˆ†ï¼‰
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆåŠŸç¢ºèªï¼ˆè‡ªå‹•ï¼‰

### é€±æ¬¡
- [ ] ãƒ­ã‚°ç¢ºèªï¼ˆ15åˆ†ï¼‰
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ç¢ºèªï¼ˆ5åˆ†ï¼‰

### æœˆæ¬¡
- [ ] WordPress/ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ›´æ–°ï¼ˆ30åˆ†ï¼‰
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒªã‚¹ãƒˆã‚¢ãƒ†ã‚¹ãƒˆï¼ˆ60åˆ†ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆ30åˆ†ï¼‰

---

## âš ï¸ æ—¢å­˜ã‚¤ãƒ³ãƒ•ãƒ©ã¨ã®å…±å­˜ç¢ºèª

### ãƒªã‚½ãƒ¼ã‚¹ç¢ºèªï¼ˆ2025-11-08æ™‚ç‚¹ï¼‰

| é …ç›® | æ—¢å­˜ä½¿ç”¨é‡ | Blogå‰²å½“ | åˆè¨ˆ | åˆ¶ç´„ |
|------|-----------|---------|------|------|
| **RAM** | 11GB (Mailserver) | 4GB | 15GB / 30GB | âœ… ä½™è£•ã‚ã‚Š |
| **SSD** | [è¦ç¢ºèª] | 20GB | - / 390GB | âœ… ä½™è£•ã‚ã‚Šï¼ˆæ¨å®šï¼‰ |
| **HDD** | 434MB | 50GBï¼ˆåˆæœŸï¼‰ | 3.4TB | âœ… ååˆ† |

### ãƒãƒ¼ãƒˆç«¶åˆå›é¿

| ã‚µãƒ¼ãƒ“ã‚¹ | Mailserver | Blog | ç«¶åˆ |
|---------|-----------|------|------|
| **Nginx HTTP** | - | 8080ï¼ˆå†…éƒ¨ï¼‰ | âœ… å›é¿ |
| **Nginx HTTPS** | 443ï¼ˆå¤–éƒ¨ï¼‰ | TunnelçµŒç”± | âœ… å›é¿ |
| **MariaDB** | 3306ï¼ˆå†…éƒ¨ï¼‰ | 3307ï¼ˆå†…éƒ¨ï¼‰ | âœ… å›é¿ |

### Docker Network

- **Mailserver**: `mailserver_mailserver_network`, `staging_mailserver_network`
- **Blog**: `blog_network`ï¼ˆæ–°è¦ä½œæˆï¼‰
- âœ… ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é›¢å®Œäº†

---

## ğŸŒ©ï¸ Cloudflare Tunnelè¦ä»¶

### Cloudflareã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¦ä»¶

- **ãƒ—ãƒ©ãƒ³**: Freeï¼ˆç„¡æ–™ï¼‰ãƒ—ãƒ©ãƒ³ã§åˆ©ç”¨å¯
- **DNSç®¡ç†**: ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã‚’Cloudflareã¸ç§»ç®¡
- **Tunnelèªè¨¼**: Zero Trustè¨­å®šï¼ˆåˆå›ã®ã¿ï¼‰

### cloudflaredãƒ‡ãƒ¼ãƒ¢ãƒ³

- **å®Ÿè¡Œæ–¹å¼**: Docker Composeã‚³ãƒ³ãƒ†ãƒŠåŒ–
- **æ¥ç¶šæ–¹å¼**: outboundæ¥ç¶šã®ã¿ï¼ˆãƒãƒ¼ãƒˆé–‹æ”¾ä¸è¦ï¼‰
- **èªè¨¼æƒ…å ±**: `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ï¼ˆGitç®¡ç†å¤–ï¼‰
- **è‡ªå‹•èµ·å‹•**: Docker Composeå†èµ·å‹•ãƒãƒªã‚·ãƒ¼è¨­å®š

---

## ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç·Šæ€¥å¯¾å‡¦ï¼ˆæœ€å„ªå…ˆï¼‰

**âš ï¸ èªè¨¼æƒ…å ±ç®¡ç†ã®é‡è¦æ€§**:
- **çµ¶å¯¾ç¦æ­¢**: DBèªè¨¼æƒ…å ±ã‚’å¹³æ–‡ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¨˜è¼‰
- **Gitç®¡ç†å¤–**: `claudedocs/*-credentials.*`, `xserver-credentials.env`ã‚’`.gitignore`è¿½åŠ æ¸ˆã¿
- **æ—¢ã«ã‚³ãƒŸãƒƒãƒˆæ¸ˆã¿ã®å ´åˆ**: å³åº§ã«Xserverç®¡ç†ç”»é¢ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ â†’ Gitå±¥æ­´ã‹ã‚‰å‰Šé™¤

**ç·Šæ€¥å¯¾å‡¦æ‰‹é †**ï¼ˆèªè¨¼æƒ…å ±ã‚’èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ãŸå ´åˆï¼‰:
```bash
# 1. èªè¨¼æƒ…å ±ã‚’å³åº§ã«å¤‰æ›´ï¼ˆXserverç®¡ç†ç”»é¢ï¼‰
# 2. Gitå±¥æ­´ã‹ã‚‰å®Œå…¨å‰Šé™¤
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch docs/application/blog/claudedocs/xserver-investigation-commands.sh" \
  --prune-empty --tag-name-filter cat -- --all

# 3. ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã¸å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆæ³¨æ„ï¼ï¼‰
git push origin --force --all

# 4. .gitignoreç¢ºèª
cat .gitignore | grep xserver-credentials
```

**èª¿æŸ»çµæœã®å®‰å…¨ãªä¿ç®¡**:
- **å³åº§ã«æš—å·åŒ–**: èª¿æŸ»çµæœãƒ•ã‚¡ã‚¤ãƒ«ã¯æ©Ÿå¯†æƒ…å ±ï¼ˆDBèªè¨¼æƒ…å ±ã€.htaccessï¼‰ã‚’å«ã‚€ãŸã‚ã€GPG/7-Zipã§æš—å·åŒ–
- **Gitç®¡ç†å¤–**: `.gitignore`ã«è¿½åŠ æ¸ˆã¿ã€èª¤ã‚³ãƒŸãƒƒãƒˆé˜²æ­¢
- **ä¿ç®¡æœŸé–“**: ç§»è¡Œå®Œäº†å¾Œï¼ˆPhase Eå®Œäº† + 2é€±é–“ï¼‰ã¯å³åº§ã«å‰Šé™¤
- **è©³ç´°æ‰‹é †**: [04_migration.md - Phase A-0 Step 11](./04_migration.md#ã‚¹ãƒ†ãƒƒãƒ—-11-èª¿æŸ»çµæœã®å®‰å…¨ãªä¿ç®¡å¿…é ˆ)

**è©³ç´°**: [04_migration.md - Phase A-0-X å•é¡Œ3](./04_migration.md#phase-a-0-x-é‡å¤§ãªäº’æ›æ€§å•é¡Œã®ç¢ºèªå¿…èª­)

---

## âš ï¸ ç§»è¡Œå‰ã®é‡å¤§ãªäº’æ›æ€§å•é¡Œï¼ˆå¿…èª­ï¼‰

**PHPäº’æ›æ€§ãƒªã‚¹ã‚¯**: âœ… **è§£æ±ºæ¸ˆã¿**
- **Xserver**: **PHP 8.3.21ï¼ˆæ›´æ–°æ¸ˆã¿ï¼‰** âœ…
- **Dell**: PHP 8.3ç³»ï¼ˆåŒä¸€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
- **WordPress**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªå¿…è¦ã€6.4+ã¸æ›´æ–°æ¨å¥¨
- **âœ… å¯¾å‡¦å®Œäº†**: PHP 8.3.21ã§çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€äº’æ›æ€§å•é¡Œãªã—

**Apache â†’ Nginxå¤‰æ›**:
- kuma8088.com: WpFastestCacheä½¿ç”¨ï¼ˆ`.htaccess`ãŒNginxã§å‹•ä½œã—ãªã„ï¼‰
- webmakesprofit.com: ç”»åƒhotlinkä¿è­·ï¼ˆRewriteCondä½¿ç”¨ï¼‰
- **âš ï¸ å¯¾å‡¦**: ç§»è¡Œå¾Œã«Nginxè¨­å®šã¸ã®æ‰‹å‹•å¤‰æ›ãŒå¿…è¦

**è©³ç´°**: [04_migration.md - Phase A-0-X](./04_migration.md#phase-a-0-x-é‡å¤§ãªäº’æ›æ€§å•é¡Œã®ç¢ºèªå¿…èª­)

---

## ğŸ“ ç§»è¡Œãƒ—ãƒ­ã‚»ã‚¹æ¦‚è¦

### Phase A: æº–å‚™ï¼ˆXserverå´ï¼‰
1. WordPress DBãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
2. WordPress filesãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
3. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³/ãƒ†ãƒ¼ãƒä¸€è¦§è¨˜éŒ²
4. URLæ§‹é€ /ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯è¨­å®šè¨˜éŒ²
5. **âš ï¸ äº’æ›æ€§å•é¡Œã®ç¢ºèª**ï¼ˆPHP/Apacheâ†’Nginxå¤‰æ›ï¼‰

### Phase B: Dellç’°å¢ƒæ§‹ç¯‰
1. Docker Composeç’°å¢ƒæ§‹ç¯‰
2. Cloudflare Tunnelè¨­å®š
3. DB/ãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
4. wp-config.phpèª¿æ•´

### Phase C: å‹•ä½œç¢ºèª
1. ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œç¢ºèª
2. è¡¨ç¤ºå´©ã‚Œ/ãƒªãƒ³ã‚¯åˆ‡ã‚Œãƒã‚§ãƒƒã‚¯
3. ç®¡ç†ç”»é¢å‹•ä½œç¢ºèª
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### Phase D: DNSåˆ‡æ›¿
1. Cloudflare DNSè¨­å®š
2. TTLçŸ­ç¸®ï¼ˆåˆ‡æ›¿å‰24æ™‚é–“ï¼‰
3. DNSåˆ‡æ›¿å®Ÿæ–½
4. å‹•ä½œç¢ºèªãƒ»ç›£è¦–

### Phase E: Xserveråœæ­¢
1. 2é€±é–“ä¸¦è¡Œé‹ç”¨
2. Xserverãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰
3. å¥‘ç´„è§£ç´„æ‰‹ç¶šã

---

## ğŸ“ å‚è€ƒæƒ…å ±

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](../../infra/README.md)
- [Mailserveræ§‹ç¯‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](../mailserver/README.md)
- [Dockerç’°å¢ƒæ§‹ç¯‰æ‰‹é †](../../infra/procedures/3-docker/3.1-docker-environment-setup.md)
- [ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…](../mailserver/backup/03_implementation.md)

### æŠ€è¡“å‚è€ƒãƒªãƒ³ã‚¯

**WordPresså…¬å¼**:
- [WordPress Requirements](https://wordpress.org/about/requirements/)
- [Installing WordPress](https://wordpress.org/support/article/how-to-install-wordpress/)

**Dockerå…¬å¼**:
- [Docker Hub - WordPress](https://hub.docker.com/_/wordpress)
- [Docker Hub - MariaDB](https://hub.docker.com/_/mariadb)

**Cloudflare Tunnelå…¬å¼**:
- [Cloudflare Tunnel Documentation](https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/)

---

## ğŸ“ˆ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—

| Phase | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|------------|-----------|
| Phase 1 | è¦ä»¶å®šç¾© | âœ… å®Œäº† |
| Phase 2 | ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ | âœ… å®Œäº† |
| Phase 3 | æ§‹ç¯‰æ‰‹é †æ›¸ä½œæˆ | âœ… å®Œäº† |
| Phase 4 | å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ | ğŸ“ æœªç€æ‰‹ |
| Phase 5 | ç§»è¡Œå®Ÿæ–½ | ğŸ“ æœªç€æ‰‹ |
| Phase 6 | æœ¬ç•ªé‹ç”¨é–‹å§‹ | ğŸ“ æœªç€æ‰‹ |

---

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆäºˆå®šï¼‰

### ã‚ˆãã‚ã‚‹å•é¡Œï¼ˆæƒ³å®šï¼‰

#### WordPressã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
```bash
# ã‚³ãƒ³ãƒ†ãƒŠçŠ¶æ…‹ç¢ºèª
docker compose ps

# Nginxãƒ­ã‚°ç¢ºèª
docker compose logs nginx | tail -50

# Cloudflare Tunnelãƒ­ã‚°ç¢ºèª
docker compose logs cloudflared | tail -50
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
# MariaDBãƒ­ã‚°ç¢ºèª
docker compose logs mariadb | tail -50

# WordPressè¨­å®šç¢ºèª
docker compose exec wordpress cat wp-config.php | grep DB_
```

#### ç”»åƒè¡¨ç¤ºã•ã‚Œãªã„
```bash
# ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ç¢ºèª
docker compose exec wordpress ls -la /var/www/html/wp-content/uploads/

# Nginxã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºç¢ºèª
docker compose exec nginx cat /etc/nginx/nginx.conf | grep client_max_body_size
```

---

**ä½œæˆæ—¥**: 2025-11-08
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1
**ä½œæˆè€…**: Claude

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: [05_testing.md](05_testing.md) - ãƒ†ã‚¹ãƒˆè¨ˆç”»æ›¸ä½œæˆ
