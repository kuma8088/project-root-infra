# I004: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸å…·åˆä¿®æ­£ï¼ˆç·Šæ€¥ï¼‰

**é–¢é€£ã‚¿ã‚¹ã‚¯**: [#004] è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä¸å…·åˆä¿®æ­£ï¼ˆç·Šæ€¥ï¼‰
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Inbox
**å„ªå…ˆåº¦**: Critical âš ï¸
**ä½œæˆæ—¥**: 2025-11-10
**æ‹…å½“**: æœªå‰²å½“

---

## ğŸ“‹ èª²é¡Œæ¦‚è¦

Blog Systemã®è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„ã€‚`/mnt/backup-hdd/blog/backups/daily/` ãŠã‚ˆã³ `weekly/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç©ºã®çŠ¶æ…‹ã€‚

---

## ğŸ¯ ç›®æ¨™

æ—¥æ¬¡ãƒ»é€±æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®æ­£å¸¸å‹•ä½œã‚’å¾©æ—§ã—ã€ãƒ‡ãƒ¼ã‚¿æå¤±ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã™ã‚‹ã€‚

---

## ğŸ“Œ ç¾çŠ¶

### ç¢ºèªäº‹é …
- [ ] cronè¨­å®šãŒå­˜åœ¨ã™ã‚‹ã‹
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå­˜åœ¨ã™ã‚‹ã‹
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡
- [ ] cronå®Ÿè¡Œãƒ­ã‚°

### ç¾åœ¨ã®çŠ¶æ…‹
```bash
/mnt/backup-hdd/blog/backups/
â”œâ”€â”€ daily/    # ç©º
â””â”€â”€ weekly/   # ç©º
```

---

## ğŸ’¡ æƒ³å®šã•ã‚Œã‚‹åŸå› 

1. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆæœªä½œæˆ**
   - `services/blog/scripts/backup.sh` ãŒå­˜åœ¨ã—ãªã„
   - ç¢ºèªã‚³ãƒãƒ³ãƒ‰: `ls -la services/blog/scripts/`

2. **cronæœªè¨­å®š**
   - Blogç”¨ã®cronã‚¸ãƒ§ãƒ–ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„
   - ç¢ºèªã‚³ãƒãƒ³ãƒ‰: `crontab -l | grep blog`

3. **ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³å•é¡Œ**
   - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®æ›¸ãè¾¼ã¿æ¨©é™ãªã—
   - ç¢ºèªã‚³ãƒãƒ³ãƒ‰: `ls -ld /mnt/backup-hdd/blog/backups/`

4. **ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³**
   - `/mnt/backup-hdd` ã®ç©ºãå®¹é‡ä¸è¶³
   - ç¢ºèªã‚³ãƒãƒ³ãƒ‰: `df -h /mnt/backup-hdd`

---

## ğŸ”§ å¯¾å¿œæ‰‹é †

### Phase 1: èª¿æŸ»ï¼ˆå³æ™‚å®Ÿæ–½ï¼‰
```bash
# 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆç¢ºèª
ls -la /opt/onprem-infra-system/project-root-infra/services/blog/scripts/

# 2. cronè¨­å®šç¢ºèª
crontab -l | grep -i blog

# 3. ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ç¢ºèª
ls -ld /mnt/backup-hdd/blog/backups/{daily,weekly}

# 4. ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ç¢ºèª
df -h /mnt/backup-hdd

# 5. éå»ã®ãƒ­ã‚°ç¢ºèª
ls -la ~/.blog-backup.log
```

### Phase 2: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
- [ ] Mailserver ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‚è€ƒ
- [ ] WordPress ã‚µã‚¤ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆrsyncï¼‰
- [ ] MariaDB ãƒ€ãƒ³ãƒ—ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆmysqldumpï¼‰
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆdaily 7æ—¥, weekly 4é€±ï¼‰
- [ ] å®Ÿè£…å ´æ‰€: `services/blog/scripts/backup.sh`
- [ ] å‚è€ƒ: `services/mailserver/scripts/backup/backup.sh`

### Phase 3: cronè¨­å®š
```bash
# æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: æ¯æ—¥ 3:00
0 3 * * * /opt/onprem-infra-system/project-root-infra/services/blog/scripts/backup.sh daily >> ~/.blog-backup.log 2>&1

# é€±æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: æ—¥æ›œ 4:00
0 4 * * 0 /opt/onprem-infra-system/project-root-infra/services/blog/scripts/backup.sh weekly >> ~/.blog-backup.log 2>&1
```

### Phase 4: å‹•ä½œç¢ºèª
- [ ] æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆç¢ºèª
- [ ] ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèª
- [ ] cronå®Ÿè¡Œç¢ºèªï¼ˆç¿Œæ—¥ï¼‰

---

## ğŸš§ ãƒ–ãƒ­ãƒƒã‚«ãƒ¼

ãªã—ï¼ˆå³åº§ã«å¯¾å¿œå¯èƒ½ï¼‰

---

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. èª¿æŸ»ãƒ•ã‚§ãƒ¼ã‚ºå®Ÿæ–½
2. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
3. cronè¨­å®š
4. å‹•ä½œç¢ºèª

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `docs/application/01_improvement+issue.md` - ã‚¿ã‚¹ã‚¯#004
- `services/mailserver/scripts/backup/backup.sh` - å‚è€ƒå®Ÿè£…
- `docs/application/mailserver/backup/03_implementation.md` - Mailserver ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»•æ§˜
- C001_Xserver-migration-issues.md - Phase 2 Task 2-1/2-2

---

## ğŸ“… æ›´æ–°å±¥æ­´

- 2025-11-10: Issueä½œæˆ
