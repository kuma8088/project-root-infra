# Webå´å®Ÿè£…ã‚¬ã‚¤ãƒ‰ï¼ˆç°¡æ˜“ç‰ˆï¼‰

**å¯¾è±¡**: Claude Code on the webã§å®Ÿè¡Œå¯èƒ½ãªã‚¿ã‚¹ã‚¯

**å‰æ**: [03_TASK_BREAKDOWN.md](03_TASK_BREAKDOWN.md) ã® Webå´ã‚¿ã‚¹ã‚¯ï¼ˆW-001 ~ W-040ï¼‰ã‚’å‚ç…§

**ä½œæˆæ—¥**: 2025-11-14

---

## ğŸ“‹ æ¦‚è¦

Webå´ã§å®Ÿè£…ã™ã¹ãå…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã¨ã€ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

**å®Ÿè£…ã‚¿ã‚¹ã‚¯æ•°**: 40ã‚¿ã‚¹ã‚¯
**æ¨å®šæ‰€è¦æ™‚é–“**: 22æ™‚é–“ï¼ˆClaude Code on the webã§è‡ªå‹•ç”Ÿæˆå¯èƒ½ï¼‰

---

## ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½

### æœ€å„ªå…ˆï¼ˆPhase 1: Mailserverçµ±åˆï¼‰
1. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ¢ãƒ‡ãƒ«** (W-001 ~ W-003): SQLAlchemyãƒ¢ãƒ‡ãƒ«ä½œæˆ
2. **Pydanticã‚¹ã‚­ãƒ¼ãƒ** (W-004): ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
3. **ã‚µãƒ¼ãƒ“ã‚¹å±¤** (W-005 ~ W-007): ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
4. **API ãƒ«ãƒ¼ã‚¿ãƒ¼** (W-008): ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
5. **è¨­å®šæ›´æ–°** (W-009 ~ W-012): DBæ¥ç¶šã€ä¾å­˜é–¢ä¿‚

6. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‹å®šç¾©** (W-013): TypeScriptå‹
7. **APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ** (W-014): HTTPé€šä¿¡å±¤
8. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** (W-015 ~ W-019): UIéƒ¨å“
9. **ãƒšãƒ¼ã‚¸** (W-020 ~ W-022): ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
10. **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** (W-023 ~ W-025): ç”»é¢é·ç§»

### æ¬¡å„ªå…ˆï¼ˆPhase 2: DNSç®¡ç†å¼·åŒ–ï¼‰
11. **DNSæ©Ÿèƒ½å¼·åŒ–** (W-026 ~ W-035): Cloudflareãƒªãƒ³ã‚¯ã€ç·¨é›†ã€æ¤œè¨¼

### æœ€å¾Œï¼ˆPhase 3: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
12. **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰** (W-036 ~ W-038): ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
13. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«** (W-039 ~ W-040): .envã€README

---

## ğŸ“ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼ˆå…¨40ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆ25ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
```
services/unified-portal/backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ mail_user.py          âœ… W-001
â”‚   â”‚   â”œâ”€â”€ mail_domain.py        âœ… W-002
â”‚   â”‚   â”œâ”€â”€ audit_log.py          âœ… W-003
â”‚   â”‚   â”œâ”€â”€ admin_user.py         âœ… NEW (ç®¡ç†è€…ç®¡ç†)
â”‚   â”‚   â””â”€â”€ password_reset.py     âœ… NEW (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ)
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â””â”€â”€ mailserver.py         âœ… W-004
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ mail_user_service.py  âœ… W-005
â”‚   â”‚   â”œâ”€â”€ mail_domain_service.py âœ… W-006
â”‚   â”‚   â”œâ”€â”€ audit_service.py      âœ… W-007
â”‚   â”‚   â”œâ”€â”€ admin_user_service.py âœ… NEW
â”‚   â”‚   â”œâ”€â”€ password_reset_service.py âœ… NEW
â”‚   â”‚   â””â”€â”€ email_service.py      âœ… NEW (ãƒ¡ãƒ¼ãƒ«é€ä¿¡)
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ mailserver.py         âœ… W-008
â”‚   â”‚   â””â”€â”€ admin_users.py        âœ… NEW
â”‚   â”œâ”€â”€ database.py               âœ… W-009 (æ›´æ–°)
â”‚   â”œâ”€â”€ config.py                 âœ… W-010 (æ›´æ–°)
â”‚   â””â”€â”€ main.py                   âœ… W-011 (æ›´æ–°)
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_mailserver_router.py âœ… W-036
â”‚   â”œâ”€â”€ test_mail_user_service.py âœ… W-037
â”‚   â”œâ”€â”€ test_admin_user_service.py âœ… NEW
â”‚   â””â”€â”€ test_password_reset.py    âœ… NEW
â”œâ”€â”€ requirements.txt              âœ… W-012 (æ›´æ–°)
â””â”€â”€ .env.example                  âœ… W-039 (æ›´æ–°)
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆ15ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
```
services/unified-portal/frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ mailserver.ts         âœ… W-013
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ mailserver-api.ts     âœ… W-014
â”‚   â”œâ”€â”€ components/mailserver/
â”‚   â”‚   â”œâ”€â”€ UserTable.tsx         âœ… W-015
â”‚   â”‚   â”œâ”€â”€ UserForm.tsx          âœ… W-016
â”‚   â”‚   â”œâ”€â”€ DomainTable.tsx       âœ… W-017
â”‚   â”‚   â”œâ”€â”€ DomainForm.tsx        âœ… W-018
â”‚   â”‚   â”œâ”€â”€ AuditLogTable.tsx     âœ… W-019
â”‚   â”‚   â”œâ”€â”€ AdminUserTable.tsx    âœ… NEW
â”‚   â”‚   â””â”€â”€ AdminUserForm.tsx     âœ… NEW
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ MailUserManagement.tsx âœ… W-020
â”‚   â”‚   â”œâ”€â”€ MailDomainManagement.tsx âœ… W-021
â”‚   â”‚   â”œâ”€â”€ AuditLogs.tsx         âœ… W-022
â”‚   â”‚   â”œâ”€â”€ AdminUserManagement.tsx âœ… NEW
â”‚   â”‚   â”œâ”€â”€ ForgotPassword.tsx    âœ… NEW
â”‚   â”‚   â”œâ”€â”€ ResetPassword.tsx     âœ… NEW
â”‚   â”‚   â””â”€â”€ DomainManagement.tsx  âœ… W-026-W-035 (æ›´æ–°)
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useMailUsers.ts       âœ… W-025
â”‚   â”‚   â””â”€â”€ useAdminUsers.ts      âœ… NEW
â”‚   â”œâ”€â”€ App.tsx                   âœ… W-023 (æ›´æ–°)
â”‚   â””â”€â”€ components/layout/Layout.tsx âœ… W-024 (æ›´æ–°)
â””â”€â”€ package.json                  âœ… (å¤‰æ›´ãªã—)
```

---

## ğŸ’¡ å®Ÿè£…æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### Option A: å…¨è‡ªå‹•ç”Ÿæˆï¼ˆæ¨å¥¨ï¼‰
Claude Code on the webã«ä»¥ä¸‹ã‚’ä¾é ¼ï¼š

```
ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ã€Unified Portalçµ±åˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š

- docs/application/unified-portal/integration/01_REQUIREMENTS.md
- docs/application/unified-portal/integration/02_ARCHITECTURE.md
- docs/application/unified-portal/integration/03_TASK_BREAKDOWN.md

W-001ã‹ã‚‰W-040ã¾ã§ã€å…¨40ã‚¿ã‚¹ã‚¯ã®å®Ÿè£…ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
```

### Option B: æ®µéšçš„å®Ÿè£…
1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ¢ãƒ‡ãƒ«ãƒ»ã‚¹ã‚­ãƒ¼ãƒï¼ˆW-001 ~ W-004ï¼‰
2. ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼ˆW-005 ~ W-007ï¼‰
3. APIãƒ«ãƒ¼ã‚¿ãƒ¼ï¼ˆW-008ï¼‰
4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‹å®šç¾©ãƒ»APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆW-013 ~ W-014ï¼‰
5. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆW-015 ~ W-019ï¼‰
6. ãƒšãƒ¼ã‚¸ï¼ˆW-020 ~ W-022ï¼‰
7. DNSå¼·åŒ–ï¼ˆW-026 ~ W-035ï¼‰
8. ç®¡ç†è€…ç®¡ç†ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆï¼ˆNEWï¼‰
9. ãƒ†ã‚¹ãƒˆï¼ˆW-036 ~ W-038ï¼‰

---

## âš™ï¸ ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ä¾‹

### ãƒ¢ãƒ‡ãƒ«ä¾‹: `app/models/mail_user.py`
è©³ç´°ã¯ [02_ARCHITECTURE.md](02_ARCHITECTURE.md) å‚ç…§

### APIãƒ«ãƒ¼ã‚¿ãƒ¼ä¾‹: `app/routers/mailserver.py`
è©³ç´°ã¯ [06_API_SPECIFICATION.md](06_API_SPECIFICATION.md) å‚ç…§

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸ä¾‹: `pages/MailUserManagement.tsx`
```typescript
// React + TypeScript + shadcn/ui
// è©³ç´°å®Ÿè£…ã¯ W-020 ã‚¿ã‚¹ã‚¯å‚ç…§
```

---

## âœ… å®Ÿè£…å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- [ ] å…¨ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆmail_user, mail_domain, audit_log, admin_user, password_resetï¼‰
- [ ] Pydanticã‚¹ã‚­ãƒ¼ãƒä½œæˆ
- [ ] ã‚µãƒ¼ãƒ“ã‚¹å±¤å®Ÿè£…ï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] APIãƒ«ãƒ¼ã‚¿ãƒ¼å®Ÿè£…ï¼ˆ2ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] database.pyæ›´æ–°ï¼ˆMail DBæ¥ç¶šï¼‰
- [ ] config.pyæ›´æ–°ï¼ˆç’°å¢ƒå¤‰æ•°ï¼‰
- [ ] main.pyæ›´æ–°ï¼ˆãƒ«ãƒ¼ã‚¿ãƒ¼ç™»éŒ²ï¼‰
- [ ] requirements.txtæ›´æ–°ï¼ˆpymysql, passlib, emailé€ä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
- [ ] .env.exampleæ›´æ–°

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- [ ] TypeScriptå‹å®šç¾©ä½œæˆ
- [ ] APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ
- [ ] å…¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆï¼ˆ9ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] å…¨ãƒšãƒ¼ã‚¸ä½œæˆï¼ˆ7ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] App.tsxãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¿½åŠ 
- [ ] Layout.tsxãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
- [ ] ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ä½œæˆ

### ãƒ†ã‚¹ãƒˆ
- [ ] ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ4ãƒ•ã‚¡ã‚¤ãƒ«ä»¥ä¸Šï¼‰
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ï¼‰

---

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. **Webå´ã§å…¨ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ**ï¼ˆã“ã®ã‚¬ã‚¤ãƒ‰ã«åŸºã¥ã„ã¦ï¼‰
2. **Git commit & push**
3. **[05_LOCAL_IMPLEMENTATION.md](05_LOCAL_IMPLEMENTATION.md) ã¸ç§»è¡Œ**ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ä½œç¢ºèªï¼‰

---

**å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [01_REQUIREMENTS.md](01_REQUIREMENTS.md) - è©³ç´°è¦ä»¶
- [02_ARCHITECTURE.md](02_ARCHITECTURE.md) - è¨­è¨ˆè©³ç´°
- [03_TASK_BREAKDOWN.md](03_TASK_BREAKDOWN.md) - ã‚¿ã‚¹ã‚¯ä¸€è¦§
- [06_API_SPECIFICATION.md](06_API_SPECIFICATION.md) - APIä»•æ§˜
- [07_TEST_PLAN.md](07_TEST_PLAN.md) - ãƒ†ã‚¹ãƒˆè¨ˆç”»
